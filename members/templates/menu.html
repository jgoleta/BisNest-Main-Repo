{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard | BisNest</title>
    <link rel="stylesheet" href="{% static 'css/centralStyle.css' %}">
    <link rel="stylesheet" href="{% static 'css/menuStyle.css' %}">
    <link rel="stylesheet" href="{% static 'css/centralDarkStyle.css' %}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="{% static 'js/darkMode.js' %}" defer></script>
    <script src="{% static 'js/sidebar.js' %}" defer></script>
    <script src="{% static 'js/menu.js' %}"></script>
</head>

<body>

    {% include 'sidebar.html' %}

    <main class="main-content">

        {% include 'header.html' with page="Analytics" %}

        <div class="container">
            <ul class="dashboard-button-container">
                <li class="dashboard-button" id="generateReportBtn">Generate Report</li>
                <li class="dashboard-button" id="refreshBtn">Refresh Data</li>
                <li class="dashboard-button-order" id="addOrderBtn"><a href="{% url 'history' %}">New Order</a></li>
            </ul>

            <div class="stats-grid">
                <div class="stat-card">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"
                        fill="#BB271A">
                        <path
                            d="M288-648q-29.7 0-50.85-21.19Q216-690.37 216-720.12v-72.13Q216-822 237.15-843T288-864h384q29.7 0 50.85 21.19Q744-821.63 744-791.88v72.13Q744-690 722.85-669T672-648H288Zm0-72h384v-72H288v72ZM168-96q-29.7 0-50.85-21.15Q96-138.3 96-168v-24h768v24q0 29.7-21.15 50.85Q821.7-96 792-96H168ZM96-240l149-318q8.8-19.66 26.4-30.83Q289-600 309.82-600h340.36q20.82 0 38.42 11.17T715-558l149 318H96Zm264-72h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm108 168h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm108 168h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Zm0-84h24q9.6 0 16.8-7.2 7.2-7.2 7.2-16.8 0-9.6-7.2-16.8-7.2-7.2-16.8-7.2h-24q-9.6 0-16.8 7.2-7.2 7.2-7.2 16.8 0 9.6 7.2 16.8 7.2 7.2 16.8 7.2Z" />
                    </svg>
                    <h3 style="color: #BB271A"> Total Sales</h3>
                    <div class="stat-value" id="totalSales">â‚±{{ total_sales|default:0|floatformat:2 }}</div>
                    <div class="stat-note">All-time collected payments</div>
                </div>
                <div class="stat-card">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"
                        fill="#B89230">
                        <path
                            d="M160-160v-516L82-846l72-34 94 202h464l94-202 72 34-78 170v516H160Zm240-280h160q17 0 28.5-11.5T600-480q0-17-11.5-28.5T560-520H400q-17 0-28.5 11.5T360-480q0 17 11.5 28.5T400-440Z" />
                    </svg>
                    <h3  style="color: #B89230;">Orders</h3>
                    <div class="stat-value" id="totalOrders">{{ total_orders|default:0 }}</div>
                    <div class="stat-note">Total orders in system</div>
                </div>
                <div class="stat-card">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"
                        fill="#2854C5">
                        <path
                            d="M720-400v-120H600v-80h120v-120h80v120h120v80H800v120h-80Zm-360-80q-66 0-113-47t-47-113q0-66 47-113t113-47q66 0 113 47t47 113q0 66-47 113t-113 47ZM40-160v-112q0-34 17.5-62.5T104-378q62-31 126-46.5T360-440q66 0 130 15.5T616-378q29 15 46.5 43.5T680-272v112H40Z" />
                    </svg>
                    <h3 style="color: #2854C5;">New Customers</h3>
                    <div class="stat-value" id="newCustomers">{{ new_customers|default:0 }}</div>
                    <div class="stat-note">Added in last 30 days</div>
                </div>
                <div class="stat-card">
                    <svg xmlns="http://www.w3.org/2000/svg" height="30px" viewBox="0 -960 960 960" width="30px"
                        fill="#48752C">
                        <path
                            d="M200-80q-33 0-56.5-23.5T120-160v-451q-18-11-29-28.5T80-680v-120q0-33 23.5-56.5T160-880h640q33 0 56.5 23.5T880-800v120q0 23-11 40.5T840-611v451q0 33-23.5 56.5T760-80H200Zm-40-600h640v-120H160v120Zm200 280h240v-80H360v80Z" />
                    </svg>
                    <h3 style="color: #48752C;">Inventory</h3>
                    <div class="stat-value" id="inventoryLevel">{{ inventory_level|default:0 }}%</div>
                    <div class="stat-note">Products with available stock</div>
                </div>
            </div>

            <div class="chart-container">
                <h2>Monthly Sales Trend</h2>
                <canvas id="salesChart"></canvas>
            </div>

        </div>
    </main>

    {{ monthly_sales|json_script:"monthly-sales-data" }}

</body>

</html>