{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BisNest Dashboard</title>
  <link rel="stylesheet" href="{% static 'css/centralStyle.css' %}">
  <link rel="stylesheet" href="{% static 'css/supplyStyle.css' %}">
  <link rel="stylesheet" href="{% static 'css/centralDarkStyle.css' %}">
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=dashboard" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <script src="{% static 'js/darkMode.js' %}" defer></script>
  <script src="{% static 'js/sidebar.js' %}" defer></script>
  <script src="{% static 'js/supply.js' %}" defer></script>

</head>

<body>

  {% include 'sidebar.html' %}

  <main class="main-content">

    {% include 'header.html' with page="Supply Management" %}

    <div class="container">
      <div class="search-bar">
        <input type="text" id="searchInput" placeholder="Search Supply:" onkeyup="searchSupply()">
        <select id="supplierFilter" onchange="searchSupply()" style="padding: 10px 14px; border: 1px solid #bbb; border-radius: 8px; font-size: 15px; background: #fff; color: #111; cursor: pointer;">
          <option value="">All Suppliers</option>
          {% for supplier in suppliers %}
          <option value="{{ supplier }}">{{ supplier }}</option>
          {% endfor %}
        </select>
        <select id="productFilter" onchange="searchSupply()" style="padding: 10px 14px; border: 1px solid #bbb; border-radius: 8px; font-size: 15px; background: #fff; color: #111; cursor: pointer;">
          <option value="">All Products</option>
          {% for product in products %}
          <option value="{{ product }}">{{ product }}</option>
          {% endfor %}
        </select>
        <div class="button-container">
          <button class="toggle-form-button" onclick="toggleForm()">+ New</button>
        </div>
      </div>

      <div class="modal-overlay" id="modalOverlay" style="display:none;"></div>
      <div class="supply-form-container" id="formContainer">
        <span class="close-button" id="closeBtn">&times;</span>
        <h2 class="form-title" id="formTitle">Supply Details</h2>
        <form class="supply-form" method="POST">
          {% csrf_token %}
          <div class="form-row">
            <div class="form-group">
              <label for="{{ form.supplier.id_for_label }}"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                  viewBox="0 -960 960 960" width="24px" fill="#A96424">
                  <path
                    d="M80-120v-560l400-160 400 160v560H640v-320H320v320H80Zm280 0v-80h80v80h-80Zm80-120v-80h80v80h-80Zm80 120v-80h80v80h-80Z" />
                </svg> Supplier:</label>
              {{ form.supplier }}
            </div>
            <div class="form-group">
              <label for="{{ form.product.id_for_label }}"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                  viewBox="0 -960 960 960" width="24px" fill="#2854C5">
                  <path
                    d="m240-522-40 22q-14 8-30 4t-24-18L66-654q-8-14-4-30t18-24l230-132h70q9 0 14.5 5.5T400-820v20q0 33 23.5 56.5T480-720q33 0 56.5-23.5T560-800v-20q0-9 5.5-14.5T580-840h70l230 132q14 8 18 24t-4 30l-80 140q-8 14-23.5 17.5T760-501l-40-20v361q0 17-11.5 28.5T680-120H280q-17 0-28.5-11.5T240-160v-362Z" />
                </svg> Product Name:</label>
              {{ form.product }}
            </div>
            <div class="form-group">
              <label for="{{ form.quantity.id_for_label }}"><svg xmlns="http://www.w3.org/2000/svg" height="20px"
                  viewBox="0 -960 960 960" width="20px" fill="#BD4C31">
                  <path
                    d="M279-144q-27 0-47.5-17.5T207-206l-63-466h120v-72.21Q264-774 285.17-795q21.16-21 50.89-21h288.22Q654-816 675-794.85T696-744v72h120l-63 466q-4 27-24.4 44.5T681-144H279Zm167-144 170-170-51-51-119 119-51-51-51 51 102 102ZM336-672h288v-72H336v72Z" />
                </svg> Quantity:</label>
              {{ form.quantity }}
            </div>
            <div class="form-group">
              <label for="{{ form.date.id_for_label }}"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                  viewBox="0 -960 960 960" width="24px" fill="#634FA2">
                  <path
                    d="m20-427 20-80h220l-20 80H20Zm260 267q-50 0-85-35t-35-85H60l20-87h207l36-146h84l50-200H180l6-24q6-28 27.5-45.5T264-800h456l-37 160h117l120 160-40 200h-80q0 50-35 85t-85 35q-50 0-85-35t-35-85H400q0 50-35 85t-85 35ZM100-573l20-80h260l-20 80H100Zm180 333q17 0 28.5-11.5T320-280q0-17-11.5-28.5T280-320q-17 0-28.5 11.5T240-280q0 17 11.5 28.5T280-240Zm400 0q17 0 28.5-11.5T720-280q0-17-11.5-28.5T680-320q-17 0-28.5 11.5T640-280q0 17 11.5 28.5T680-240Zm-43-200h193l4-21-74-99h-95l-28 120Z" />
                </svg> Delivery Date:</label>
              {{ form.date }}
            </div>
            <div class="form-group">
              <label for="{{ form.price.id_for_label }}"><svg xmlns="http://www.w3.org/2000/svg" height="24px"
                  viewBox="0 -960 960 960" width="24px" fill="#48752C">
                  <path
                    d="M80-160v-640h800v640H80Zm240-120h80v-40h40q17 0 28.5-11.5T480-360v-120q0-17-11.5-28.5T440-520H320v-40h160v-80h-80v-40h-80v40h-40q-17 0-28.5 11.5T240-600v120q0 17 11.5 28.5T280-440h120v40H240v80h80v40Zm320-30 80-80H560l80 80Zm-80-250h160l-80-80-80 80Z" />
                </svg> Total Price:</label>
              {{ form.price }}
            </div>
          </div>

          <div class="submit-wrapper">
            <button type="submit" class="submit-button">Submit</button>
          </div>
        </form>

      </div>

      <div class="supply-table-container">
        <div class="table-wrapper">
          <table class="table" id="supply-table">
            <thead>
              <tr>
                <th>Supply ID</th>
                <th>Supplier</th>
                <th>Product Name</th>
                <th>Quantity</th>
                <th>Date</th>
                <th>Price</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody id="supplies-body">
              <tr>
                <td colspan="7" style="text-align:center;">Loading...</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="pagination-container" id="supply-pagination" aria-label="Supply table pagination"></div>
    </div>
  </main>

</body>

</html>