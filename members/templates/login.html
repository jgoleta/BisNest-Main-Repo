{% load static %}
{% load socialaccount %}

<link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
<link rel="icon" type="image/png" href="https://imgur.com/FGy6T8S.png">
<link rel="stylesheet" href="{% static 'css/loginStyle.css' %}">
<script src="{% static 'js/auth.js' %}" defer></script>

<div id="loginModal" class="login-modal">
  <div class="login-modal-overlay"></div>
  <div class="login-modal-content">
    <span class="close-button" id="closeLoginBtn" onclick="closeLoginModal()">&times;</span>


    <div class="modal-container">
      <div class="form-box login-form-box">
        <form method="POST" action="{% url 'login_view' %}">
          {% csrf_token %}
          <h2>Login</h2>
          <div class="input-box">
            <div class="indicator">Email Address</div>
            <input type="text" name="email" placeholder="bisnest@gmail.com" required />
            <i class='bx bxs-user'></i>
          </div>
          <div class="input-box">
            <div class="indicator">Password</div>
            <input type="password" name="password" placeholder="●●●●●●●●●" required />
            <i class='bx bxs-lock-alt'></i>
          </div>
          {% if messages %}
          <div class="login-field-errors">
            {% for message in messages %}
              {% if 'password' in message.message|lower or 'email' in message.message|lower or 'account' in message.message|lower or message.tags == 'error' %}
              {% if not 'logged out' in message.message|lower and not 'signed out' in message.message|lower %}
              <div class="field-error-message {% if message.tags %}{{ message.tags }}{% endif %}">
                {{ message }}
              </div>
              {% endif %}
            {% endif %}
          {% endfor %}
        </div>
        {% endif %}
          <div class="show-pw-row">
            <label class="show-pw">
              <input type="checkbox" class="show-pw-login-checkbox" />
              <span class="checkbox-box" aria-hidden="true"></span>
              <span class="show-pw-label">Show password</span>
            </label>
          </div>
          <div class="input-box">
            <div class="indicator">Token</div>
            <input placeholder="a122FsaS63" />
            <i class='bx bxs-lock-alt'></i>
          </div>
          <div class="forgot-link">
            <a href="#">Forgot Password?</a>
          </div>
          <button type="submit" class="btn">Login</button>
          <p>OR CONTINUE WITH</p>
          <div class="social-icons">
            <a href="{% provider_login_url 'google' %}?next=/menu/"><i class='bx bxl-google'></i></a>
          </div>
        </form>
      </div>

      <div class="form-box register-form-box">
        <form method="POST" action="{% url 'register_view' %}">
          {% csrf_token %}
          <h2>Registration</h2>
          <div class="input-box">
            <div class="indicator">Username</div>
            <input type="text" name="username" placeholder="BisNest" required />
            <i class='bx bxs-user'></i>
          </div>
          <div class="input-box">
            <div class="indicator">Email Address</div>
            <input type="email" name="email" placeholder="bisnest@gmail.com" required />
            <i class='bx bxs-envelope'></i>
          </div>
          <div class="input-box">
            <div class="indicator">Password</div>
            <input type="password" name="password1" placeholder="●●●●●●●●●" required />
            <i class='bx bxs-lock-alt'></i>
          </div>
          <div id="reg-pw-indicator" class="pw-indicator" aria-hidden="true"></div>
          <div class="input-box">
            <div class="indicator">Confirm Password</div>
            <input type="password" name="password2" placeholder="●●●●●●●●●" required />
            <i class='bx bxs-lock-alt'></i>
          </div>
          <div class="show-pw-row">
            <label class="show-pw">
              <input type="checkbox" class="show-pw-register-checkbox" />
              <span class="checkbox-box" aria-hidden="true"></span>
              <span class="show-pw-label">Show password</span>
            </label>
          </div>

          <button type="submit" class="btn">Register</button>
          <p>OR CONTINUE WITH</p>
          <div class="social-icons">
            <a href="{% provider_login_url 'google' %}?next=/menu/"><i class='bx bxl-google'></i></a>
          </div>
        </form>
      </div>

      <div class="toggle-box">
        <div class="toggle-box-inner">
          <div class="toggle-panel toggle-left">
            <h3>Hello, Welcome!</h3>
            <p>Don't have an account?</p>
            <button class="btn register-btn" onclick="switchToRegister(event)">Register</button>
          </div>
          <div class="toggle-panel toggle-right">
            <h3>Welcome Back!</h3>
            <p>Already have an account? </p>
            <button class="btn login-btn" onclick="switchToLogin(event)">Login</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>